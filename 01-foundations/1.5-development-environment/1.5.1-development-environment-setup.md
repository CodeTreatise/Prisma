# 1.4.1 Development Environment Setup

## 📋 Section Overview
- **Duration**: 25 minutes
- **Prerequisites**: Basic understanding of Node.js and development tooling
- **Learning Objectives**: 
  - Set up a complete Prisma development environment
  - Install and configure essential development tools
  - Understand the Prisma development workflow
  - Create a foundation for productive Prisma development
- **Difficulty Level**: Beginner

---

## 🎯 What You'll Learn

By the end of this section, you will:
- ✅ Install Node.js, npm/yarn, and TypeScript with proper versions
- ✅ Set up a code editor with Prisma-specific extensions and configuration
- ✅ Understand the essential tools in the Prisma development ecosystem
- ✅ Create a basic project structure following best practices
- ✅ Verify your environment is ready for Prisma development

---

## 📖 Content

### Understanding the Development Environment

Setting up a Prisma development environment is like **preparing a professional kitchen** before cooking a gourmet meal. Just as a chef needs sharp knives, quality ingredients, proper workspace, and organized tools, a Prisma developer needs the right versions of Node.js, proper IDE configuration, and essential development tools.

### 🍳 The Professional Kitchen Analogy

```
👨‍🍳 Professional Kitchen = 💻 Prisma Development Environment

🔪 Sharp Knives (Node.js & TypeScript)
├── Right blade for the job → Correct Node.js version (18+)
├── Well-maintained and sharp → Latest stable TypeScript
├── Proper technique → Understanding async/await patterns
└── Safety knowledge → Error handling and type safety

🥘 Quality Ingredients (Development Tools)
├── Fresh produce → Latest Prisma CLI and packages
├── Proper storage → Package managers (npm/yarn/pnpm)
├── Recipe book → Documentation and references
└── Measuring tools → Linters and formatters

🏗️ Organized Workspace (IDE Setup)
├── Clean counters → Organized project structure
├── Good lighting → Syntax highlighting and IntelliSense
├── Easy access → Quick actions and shortcuts
└── Safety equipment → Error detection and debugging tools

📋 Recipe Cards (Project Templates)
├── Tried and tested → Proven project structures
├── Step-by-step → Clear development workflow
├── Variations noted → Different database options
└── Tips included → Best practices and gotchas
```

### 🚀 Node.js and TypeScript Setup

#### **Node.js Installation and Version Management**

**Why Node.js 18+ is Required:**
- **ESM Support**: Modern JavaScript module system
- **Fetch API**: Built-in HTTP client (no need for axios for simple requests)
- **Performance**: V8 engine improvements and memory optimizations
- **Prisma Compatibility**: Latest Prisma features require Node.js 18+

**Installation Options:**

```bash
# Option 1: Direct Installation (simplest)
# Download from https://nodejs.org (LTS version)

# Option 2: Using Node Version Manager (recommended for developers)
# Install nvm (Linux/macOS)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Install nvm (Windows)
# Download and install from: https://github.com/coreybutler/nvm-windows

# Install and use Node.js 18+
nvm install 18
nvm use 18
nvm alias default 18

# Option 3: Using Package Managers
# Ubuntu/Debian
sudo apt update
sudo apt install nodejs npm

# macOS with Homebrew
brew install node

# Windows with Chocolatey
choco install nodejs
```

**Verification Commands:**
```bash
# Check Node.js version (should be 18+ or 20+)
node --version
# Expected output: v18.17.0 or higher

# Check npm version
npm --version
# Expected output: 9.0.0 or higher

# Check if TypeScript is available globally (optional)
npx tsc --version
# Expected output: Version 5.0.0 or higher
```

#### **Package Manager Selection**

**Comparison of Package Managers:**

| Feature | npm | Yarn | pnpm |
|---------|-----|------|------|
| **Speed** | Good | Fast | Fastest |
| **Disk Space** | Standard | Standard | Efficient (symlinks) |
| **Lock File** | package-lock.json | yarn.lock | pnpm-lock.yaml |
| **Monorepo** | Basic | Good | Excellent |
| **Prisma Support** | ✅ Full | ✅ Full | ✅ Full |

**Recommended Setup:**
```bash
# Install pnpm globally (recommended for new projects)
npm install -g pnpm

# Or stick with npm (comes with Node.js)
# npm is perfectly fine for Prisma development

# Verify installation
pnpm --version
# Expected output: 8.0.0 or higher
```

### 🎨 IDE and Editor Configuration

#### **Visual Studio Code Setup (Recommended)**

**Why VS Code for Prisma Development:**
- **Prisma Extension**: Official extension with syntax highlighting and IntelliSense
- **TypeScript Integration**: Excellent TypeScript support out of the box
- **Database Extensions**: Great extensions for database management
- **Git Integration**: Built-in version control support
- **Debugging**: Excellent Node.js debugging capabilities

**Essential Extensions:**

```json
// .vscode/extensions.json (for team consistency)
{
  "recommendations": [
    "Prisma.prisma",                    // Prisma language support
    "ms-vscode.vscode-typescript-next", // Latest TypeScript features
    "bradlc.vscode-tailwindcss",        // If using Tailwind CSS
    "ms-vscode.vscode-json",            // JSON support
    "ms-vscode-remote.remote-containers", // Docker development
    "GitLens.gitlens",                  // Enhanced Git capabilities
    "esbenp.prettier-vscode",           // Code formatting
    "ms-vscode.vscode-eslint",          // JavaScript/TypeScript linting
    "humao.rest-client",                // API testing in VS Code
    "cweijan.vscode-database-client2"   // Database management
  ]
}
```

**VS Code Settings for Prisma:**

```json
// .vscode/settings.json
{
  "typescript.preferences.useAliasesForRenames": false,
  "typescript.suggest.autoImports": true,
  "typescript.updateImportsOnFileMove.enabled": "always",
  
  // Prisma-specific settings
  "[prisma]": {
    "editor.defaultFormatter": "Prisma.prisma",
    "editor.formatOnSave": true
  },
  
  // TypeScript/JavaScript formatting
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": true
    }
  },
  
  // File associations
  "files.associations": {
    "*.prisma": "prisma"
  },
  
  // Auto-save for better development flow
  "files.autoSave": "onFocusChange",
  
  // IntelliSense improvements
  "editor.suggestSelection": "first",
  "vsintellicode.modify.editor.suggestSelection": "automaticallyOverrodeDefaultValue"
}
```

#### **Alternative Editors**

**WebStorm/IntelliJ IDEA:**
```bash
# Install Prisma plugin
# Go to: File → Settings → Plugins → Marketplace
# Search for "Prisma" and install the official plugin
```

**Vim/Neovim:**
```vim
" Add to your .vimrc or init.vim
Plug 'pantharshit00/vim-prisma'  " Prisma syntax highlighting
Plug 'neoclide/coc.nvim'         " LSP support for TypeScript
```

**Sublime Text:**
```bash
# Install via Package Control
# Command Palette → Package Control: Install Package → Prisma
```

### 🛠️ Essential Development Tools

#### **Global Tool Installation**

```bash
# Essential Prisma development tools
npm install -g typescript           # TypeScript compiler
npm install -g tsx                  # TypeScript execution engine
npm install -g nodemon              # Auto-restart during development
npm install -g @prisma/cli          # Prisma CLI (alternative installation)

# Code quality tools
npm install -g eslint               # JavaScript/TypeScript linting
npm install -g prettier             # Code formatting
npm install -g @typescript-eslint/parser  # TypeScript ESLint support

# Database tools
npm install -g prisma-studio-cli    # Alternative Prisma Studio launcher
```

#### **Project-Level Tool Setup**

**Basic package.json for Prisma projects:**
```json
{
  "name": "prisma-project",
  "version": "1.0.0",
  "description": "A Prisma-powered application",
  "main": "dist/index.js",
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js",
    "db:generate": "prisma generate",
    "db:push": "prisma db push",
    "db:studio": "prisma studio",
    "db:seed": "tsx prisma/seed.ts",
    "lint": "eslint src/**/*.ts",
    "format": "prettier --write src/**/*.ts",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "@prisma/client": "^5.0.0",
    "prisma": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.45.0",
    "prettier": "^3.0.0",
    "tsx": "^3.12.0",
    "typescript": "^5.0.0"
  },
  "keywords": ["prisma", "typescript", "database"],
  "author": "Your Name",
  "license": "MIT"
}
```

### 📁 Project Structure and Organization

#### **Recommended Folder Structure**

```
my-prisma-app/
├── prisma/
│   ├── schema.prisma           # Database schema definition
│   ├── migrations/             # Database migration files
│   └── seed.ts                 # Database seeding script
├── src/
│   ├── lib/
│   │   ├── prisma.ts          # Prisma client configuration
│   │   └── utils.ts           # Utility functions
│   ├── types/
│   │   └── index.ts           # Custom type definitions
│   ├── services/
│   │   ├── user.service.ts    # Business logic layer
│   │   └── post.service.ts
│   ├── routes/
│   │   ├── users.ts           # API route handlers
│   │   └── posts.ts
│   └── index.ts               # Application entry point
├── tests/
│   ├── unit/                  # Unit tests
│   ├── integration/           # Integration tests
│   └── __mocks__/             # Test mocks
├── docs/
│   └── api.md                 # API documentation
├── .vscode/
│   ├── settings.json          # VS Code workspace settings
│   └── extensions.json        # Recommended extensions
├── .env                       # Environment variables
├── .env.example               # Environment template
├── .gitignore                 # Git ignore rules
├── docker-compose.yml         # Development database setup
├── package.json               # Project dependencies
├── tsconfig.json              # TypeScript configuration
├── .eslintrc.json             # ESLint configuration
├── .prettierrc                # Prettier configuration
└── README.md                  # Project documentation
```

#### **Essential Configuration Files**

**TypeScript Configuration (tsconfig.json):**
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2022"],
    "module": "CommonJS",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "allowJs": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitOverride": true,
    "exactOptionalPropertyTypes": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "removeComments": false,
    "emitDecoratorMetadata": true,
    "experimentalDecorators": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/types/*": ["./src/types/*"]
    }
  },
  "include": [
    "src/**/*",
    "prisma/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist",
    "**/*.test.ts"
  ]
}
```

**ESLint Configuration (.eslintrc.json):**
```json
{
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaVersion": 2022,
    "sourceType": "module",
    "project": "./tsconfig.json"
  },
  "plugins": ["@typescript-eslint"],
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "@typescript-eslint/recommended-requiring-type-checking"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/explicit-function-return-type": "warn",
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/no-non-null-assertion": "error",
    "prefer-const": "error",
    "no-var": "error"
  },
  "env": {
    "node": true,
    "es2022": true
  }
}
```

**Prettier Configuration (.prettierrc):**
```json
{
  "semi": false,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "arrowParens": "avoid",
  "endOfLine": "lf",
  "bracketSpacing": true,
  "bracketSameLine": false
}
```

### 🔧 Environment Verification

#### **Complete Environment Check Script**

Create this script to verify your setup:

```typescript
// scripts/verify-environment.ts
import { execSync } from 'child_process'
import * as fs from 'fs'
import * as path from 'path'

interface VersionCheck {
  name: string
  command: string
  minVersion: string
  current?: string
  status: 'pass' | 'fail' | 'warning'
}

const checks: VersionCheck[] = [
  { name: 'Node.js', command: 'node --version', minVersion: '18.0.0', status: 'fail' },
  { name: 'npm', command: 'npm --version', minVersion: '9.0.0', status: 'fail' },
  { name: 'TypeScript', command: 'npx tsc --version', minVersion: '5.0.0', status: 'fail' },
]

function parseVersion(versionString: string): number[] {
  const match = versionString.match(/(\d+)\.(\d+)\.(\d+)/)
  if (!match) return [0, 0, 0]
  return [parseInt(match[1]), parseInt(match[2]), parseInt(match[3])]
}

function compareVersions(current: string, minimum: string): boolean {
  const currentParts = parseVersion(current)
  const minimumParts = parseVersion(minimum)
  
  for (let i = 0; i < 3; i++) {
    if (currentParts[i] > minimumParts[i]) return true
    if (currentParts[i] < minimumParts[i]) return false
  }
  return true
}

console.log('🔍 Verifying Prisma Development Environment...\n')

// Check versions
for (const check of checks) {
  try {
    const output = execSync(check.command, { encoding: 'utf8' }).trim()
    check.current = output
    check.status = compareVersions(output, check.minVersion) ? 'pass' : 'fail'
  } catch (error) {
    check.current = 'Not installed'
    check.status = 'fail'
  }
}

// Check file structure
const requiredFiles = [
  'package.json',
  'tsconfig.json',
  '.gitignore'
]

const optionalFiles = [
  '.eslintrc.json',
  '.prettierrc',
  '.env.example'
]

console.log('📋 Version Requirements:')
checks.forEach(check => {
  const icon = check.status === 'pass' ? '✅' : '❌'
  console.log(`${icon} ${check.name}: ${check.current} (min: ${check.minVersion})`)
})

console.log('\n📁 Project Structure:')
requiredFiles.forEach(file => {
  const exists = fs.existsSync(file)
  const icon = exists ? '✅' : '❌'
  console.log(`${icon} ${file} ${exists ? '(found)' : '(missing)'}`)
})

optionalFiles.forEach(file => {
  const exists = fs.existsSync(file)
  const icon = exists ? '✅' : '⚠️'
  console.log(`${icon} ${file} ${exists ? '(found)' : '(optional)'}`)
})

// Check VS Code extensions (if .vscode/extensions.json exists)
if (fs.existsSync('.vscode/extensions.json')) {
  console.log('\n🎨 VS Code Extensions: Configured ✅')
} else {
  console.log('\n🎨 VS Code Extensions: Not configured ⚠️')
}

const allPassed = checks.every(check => check.status === 'pass')
console.log(`\n🎯 Environment Status: ${allPassed ? 'Ready for Prisma development! ✅' : 'Needs attention ❌'}`)

if (!allPassed) {
  console.log('\n💡 Next Steps:')
  checks.forEach(check => {
    if (check.status === 'fail') {
      console.log(`   - Install/upgrade ${check.name} to version ${check.minVersion} or higher`)
    }
  })
}
```

**Run the verification:**
```bash
# Create and run the verification script
npx tsx scripts/verify-environment.ts
```

### 🚀 Quick Start Template

#### **Initialize a New Prisma Project**

```bash
# 1. Create project directory
mkdir my-prisma-app
cd my-prisma-app

# 2. Initialize package.json
npm init -y

# 3. Install dependencies
npm install prisma @prisma/client
npm install -D typescript @types/node tsx

# 4. Initialize TypeScript
npx tsc --init

# 5. Initialize Prisma
npx prisma init

# 6. Create basic folder structure
mkdir -p src/lib src/types src/services tests

# 7. Create basic files
touch src/index.ts src/lib/prisma.ts
```

**Basic Prisma Client Setup (src/lib/prisma.ts):**
```typescript
import { PrismaClient } from '@prisma/client'

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

export const prisma = globalForPrisma.prisma ?? new PrismaClient({
  log: ['query', 'info', 'warn', 'error'],
})

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma
```

---

## 🧠 Knowledge Check

### Environment Setup Quiz

1. **What is the minimum Node.js version required for Prisma development?**
   - [ ] A) Node.js 16
   - [x] B) Node.js 18
   - [ ] C) Node.js 20
   - [ ] D) Any version

   **Explanation**: Prisma requires Node.js 18+ for full compatibility with modern JavaScript features and optimal performance.

2. **Which VS Code extension is essential for Prisma development?**
   - [ ] A) GitLens
   - [x] B) Prisma.prisma
   - [ ] C) ESLint
   - [ ] D) Prettier

   **Explanation**: The official Prisma extension provides syntax highlighting, IntelliSense, and other essential features for working with Prisma schema files.

3. **What is the recommended project structure for the Prisma schema file?**
   - [x] A) `prisma/schema.prisma`
   - [ ] B) `src/schema.prisma`
   - [ ] C) `config/schema.prisma`
   - [ ] D) `schema.prisma` in root

   **Explanation**: The conventional location is `prisma/schema.prisma`, which is also the default location when running `prisma init`.

### Hands-on Setup Exercise

**Complete this environment setup checklist:**

```bash
# ✅ Step 1: Verify Node.js version
node --version
# Expected: v18.x.x or higher

# ✅ Step 2: Create new project
mkdir prisma-test-env
cd prisma-test-env

# ✅ Step 3: Initialize project
npm init -y

# ✅ Step 4: Install Prisma
npm install prisma @prisma/client
npm install -D typescript @types/node tsx

# ✅ Step 5: Initialize Prisma
npx prisma init

# ✅ Step 6: Verify Prisma CLI
npx prisma --help

# ✅ Step 7: Check generated files
ls -la prisma/  # Should show schema.prisma
cat .env        # Should show DATABASE_URL
```

**Validation Questions:**
1. What files were created by `prisma init`? _______________
2. What is in the `.env` file? _______________
3. Can you run `npx prisma --help` successfully? _______________

### Environment Troubleshooting

**Common Issues and Solutions:**

| Issue | Symptoms | Solution |
|-------|----------|----------|
| **Node.js Too Old** | Prisma commands fail with syntax errors | Update to Node.js 18+ using nvm |
| **TypeScript Not Found** | `tsc` command not recognized | Install TypeScript: `npm install -g typescript` |
| **Prisma Extension Not Working** | No syntax highlighting in .prisma files | Install Prisma extension in VS Code |
| **Permission Errors** | npm install fails with EACCES | Use nvm or fix npm permissions |
| **PATH Issues** | Commands not found after installation | Restart terminal or check PATH environment |

---

## 💡 Key Takeaways

- 🔧 **Right Tools Matter**: Node.js 18+, TypeScript 5+, and proper IDE setup are essential
- 🎨 **IDE Configuration**: VS Code with Prisma extension provides the best development experience
- 📁 **Project Structure**: Follow conventional folder organization for maintainability
- ⚙️ **Configuration Files**: TypeScript, ESLint, and Prettier configurations improve code quality
- 🔍 **Environment Verification**: Always verify your setup before starting development
- 🚀 **Quick Start**: Use templates and scripts to speed up project initialization
- 🛠️ **Tool Choice**: pnpm > yarn > npm for package management (personal preference)
- 📋 **Best Practices**: Set up linting, formatting, and type checking from the beginning

---

## 🔗 Navigation

**📍 Current Location**: Module 1 → Section 1.4 → Lesson 1.4.1

**⬅️ Previous**: [1.4.5 Type Generation & Code Safety](../1.4-orm-concepts/1.4.5-type-generation-code-safety.md)
**➡️ Next**: [1.5.2 Database Installation (PostgreSQL recommended)](./1.5.2-database-installation-postgresql-recommended.md)

**🏠 Section Home**: [1.4 Development Environment](./README.md)
**📚 Module Home**: [Module 1: Foundations](../01-foundations.md)

**🗺️ Quick Links**:
- [Previous: Schema Validation](../1.3-schema-design/1.3.5-schema-validation-and-constraints.md)
- [Next: Database Configuration](./1.4.2-database-configuration-and-connection.md)
- [Jump to: Getting Started](../../02-getting-started/)

---

*Ready to configure your database connection? Continue to the next lesson!*
