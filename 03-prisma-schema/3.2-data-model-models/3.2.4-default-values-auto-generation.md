# 3.2.4 Default Values & Auto-generation

## ðŸ“‹ Section Overview
- **Duration**: 12 minutes
- **Prerequisites**: 
  - Completed Lesson 3.2.3: Optional vs Required Fields
  - Understanding of database constraints and triggers
  - Basic knowledge of UUID generation and auto-increment patterns
- **Learning Objectives**: 
  - Master default value configurations for intelligent field management
  - Implement auto-generation strategies for scalable data creation
  - Apply dynamic defaults for timestamps and computed values
  - Design self-managing data models with automated field population
  - Create robust data initialization patterns for production systems
- **Difficulty Level**: Beginner to Intermediate

---

## ðŸŽ¯ What You'll Learn

By the end of this lesson, you will:
- âœ… Configure static and dynamic default values effectively
- âœ… Implement auto-generation patterns for IDs, timestamps, and computed fields
- âœ… Apply conditional defaults based on business logic
- âœ… Design self-initializing data models with intelligent defaults
- âœ… Create scalable auto-generation strategies for production systems
- âœ… Handle complex default value scenarios and edge cases

---

## ðŸ“– Content

### Understanding Default Values & Auto-generation Architecture

Implementing default values and auto-generation in Prisma is like **designing an intelligent automated factory production line**. Just as modern factories have automated stations that apply standard components when workers don't specify alternatives (default bolts, standard paint colors, baseline configurations), smart assembly systems that automatically generate unique product serial numbers, tracking barcodes, and quality control timestamps, conditional automation that adapts based on product type or customer specifications (premium vs standard features, regional vs global configurations), quality assurance systems that automatically populate safety certifications, compliance stamps, and inspection records, and predictive maintenance that automatically schedules service dates, warranty periods, and replacement notificationsâ€”Prisma default values create intelligent data models with static defaults that provide sensible baseline values when none are specified, dynamic generation that automatically creates unique identifiers and temporal markers, conditional logic that adapts defaults based on model context and business rules, automated compliance that ensures regulatory and operational requirements are met, and self-managing systems that reduce manual data entry while maintaining data integrity.

### ðŸ­ Intelligent Factory Production Line Analogy

```
ðŸ­ Automated Factory Line = ðŸ“Š Prisma Default Values System

ðŸ”§ Standard Component Station (Static Defaults)
â”œâ”€â”€ Default bolts â†’ Boolean defaults (isActive: true)
â”œâ”€â”€ Standard paint â†’ String defaults (status: "draft")
â”œâ”€â”€ Baseline config â†’ Numeric defaults (quantity: 0)
â”œâ”€â”€ Safety equipment â†’ Required defaults (terms: false)
â”œâ”€â”€ Quality seals â†’ Enum defaults (priority: LOW)
â””â”€â”€ Standard packaging â†’ Array defaults (tags: [])

ðŸ¤– Smart Assembly System (Auto-generation)
â”œâ”€â”€ Serial numbers â†’ Unique IDs (@default(cuid()))
â”œâ”€â”€ Tracking barcodes â†’ UUID generation (@default(uuid()))
â”œâ”€â”€ Production timestamps â†’ Creation dates (@default(now()))
â”œâ”€â”€ Batch numbers â†’ Auto-increment (@default(autoincrement()))
â”œâ”€â”€ Quality codes â†’ Hash generation (computed values)
â””â”€â”€ Assembly sequence â†’ Ordered identifiers

âš™ï¸ Conditional Automation (Dynamic Defaults)
â”œâ”€â”€ Premium features â†’ User tier-based defaults
â”œâ”€â”€ Regional settings â†’ Location-based configuration
â”œâ”€â”€ Custom options â†’ Specification-dependent values
â”œâ”€â”€ Service levels â†’ Contract-based features
â”œâ”€â”€ Compliance requirements â†’ Regulatory adaptations
â””â”€â”€ Market variations â†’ Geographic customizations

ðŸ›¡ï¸ Quality Assurance (Automated Compliance)
â”œâ”€â”€ Safety certifications â†’ Auto-populated compliance fields
â”œâ”€â”€ Inspection records â†’ Timestamp and inspector tracking
â”œâ”€â”€ Warranty registration â†’ Automatic warranty creation
â”œâ”€â”€ Service schedules â†’ Maintenance date calculation
â”œâ”€â”€ Compliance stamps â†’ Regulatory requirement fulfillment
â””â”€â”€ Documentation â†’ Auto-generated record keeping

ðŸ“Š Predictive Maintenance (Self-managing Systems)
â”œâ”€â”€ Service intervals â†’ Calculated maintenance dates
â”œâ”€â”€ Replacement alerts â†’ Lifecycle-based notifications
â”œâ”€â”€ Performance tracking â†’ Auto-logged metrics
â”œâ”€â”€ Usage analytics â†’ Behavioral data collection
â”œâ”€â”€ System health â†’ Auto-monitored status updates
â””â”€â”€ Lifecycle management â†’ Automated state transitions
```

---

## ðŸ—ï¸ Static Default Values Fundamentals

### 1. Basic Static Default Configurations

```prisma
// ==========================================
// STATIC DEFAULT VALUE CONFIGURATIONS
// ==========================================

/// User model with comprehensive static default examples
/// Demonstrates various default value patterns for different data types
model User {
  // Unique identifier with CUID generation
  id        String   @id @default(cuid())          // Collision-resistant unique ID
  
  // String defaults for initial states
  email     String   @unique                       // Required field, no default
  username  String?  @unique                       // Optional, no default
  status    String   @default("active")            // Default account status
  role      UserRole @default(USER)                // Default user role
  
  // Boolean defaults for feature flags and permissions
  isActive        Boolean @default(true)           // Default to active account
  isVerified      Boolean @default(false)          // Default to unverified
  isEmailVerified Boolean @default(false)          // Default to email unverified
  is2FAEnabled    Boolean @default(false)          // Default 2FA disabled
  
  // Privacy and preference defaults
  isPublic           Boolean @default(true)        // Default to public profile
  allowNotifications Boolean @default(true)        // Default notifications enabled
  allowMarketing     Boolean @default(false)       // Default marketing opt-out
  showOnlineStatus   Boolean @default(true)        // Default show online status
  
  // Numeric defaults for counters and limits
  loginAttempts      Int     @default(0)           // Default zero login attempts
  postCount          Int     @default(0)           // Default zero posts
  followerCount      Int     @default(0)           // Default zero followers
  followingCount     Int     @default(0)           // Default zero following
  
  // Decimal defaults for financial and measurement data
  accountBalance     Decimal @default(0.00) @db.Decimal(10, 2)  // Default zero balance
  creditLimit        Decimal @default(1000.00) @db.Decimal(10, 2) // Default credit limit
  reputationScore    Decimal @default(50.0) @db.Decimal(5, 1)   // Default reputation
  
  // Array defaults for collections
  tags               String[] @default([])         // Default empty array
  interests          String[] @default([])         // Default empty interests
  permissions        String[] @default(["read"])   // Default basic permissions
  
  // JSON defaults for complex structures
  preferences        Json     @default("{}")       // Default empty JSON object
  metadata           Json?                         // Optional, no default
  
  // Temporal defaults (covered in next section)
  createdAt          DateTime @default(now())      // Auto-set creation time
  updatedAt          DateTime @updatedAt           // Auto-update modification time
  lastLoginAt        DateTime?                     // Optional, no default
  
  @@map("users")
  @@index([status])                                // Index default status field
  @@index([role])                                  // Index default role field
}

/// Product model with business-focused static defaults
model Product {
  // Identifier with auto-increment alternative
  id            Int      @id @default(autoincrement())  // Sequential ID
  uuid          String   @unique @default(uuid())       // UUID for external refs
  
  // Product information
  name          String                                   // Required, no default
  sku           String   @unique                         // Required, no default
  description   String?                                  // Optional, no default
  
  // Status and availability defaults
  status        ProductStatus @default(DRAFT)           // Default to draft status
  isActive      Boolean       @default(true)            // Default to active
  isVisible     Boolean       @default(true)            // Default to visible
  isFeatured    Boolean       @default(false)           // Default not featured
  isOnSale      Boolean       @default(false)           // Default not on sale
  
  // Inventory defaults
  stockQuantity Int      @default(0)                    // Default zero stock
  minStock      Int      @default(5)                    // Default minimum stock
  maxStock      Int      @default(1000)                 // Default maximum stock
  isTrackable   Boolean  @default(true)                 // Default track inventory
  
  // Pricing defaults
  price         Decimal  @db.Decimal(10, 2)            // Required, no default
  salePrice     Decimal? @db.Decimal(10, 2)            // Optional sale price
  costPrice     Decimal  @default(0.00) @db.Decimal(10, 2) // Default zero cost
  
  // Weight and dimensions with measurement defaults
  weight        Decimal  @default(0.0) @db.Decimal(8, 3)   // Default zero weight
  weightUnit    String   @default("kg")                 // Default weight unit
  
  // SEO and marketing defaults
  slug          String?  @unique                        // Optional SEO slug
  metaTitle     String?                                 // Optional meta title
  metaDesc      String?                                 // Optional meta description
  
  // Rating and review defaults
  avgRating     Decimal  @default(0.0) @db.Decimal(3, 2)   // Default zero rating
  reviewCount   Int      @default(0)                    // Default zero reviews
  viewCount     Int      @default(0)                    // Default zero views
  
  // Categorization defaults
  category      String   @default("uncategorized")     // Default category
  tags          String[] @default([])                  // Default empty tags
  
  // Vendor relationship (required)
  vendorId      String
  vendor        User     @relation("VendorProducts", fields: [vendorId], references: [id])
  
  // Audit timestamps
  createdAt     DateTime @default(now())               // Auto-set creation
  updatedAt     DateTime @updatedAt                    // Auto-update modification
  
  @@map("products")
  @@index([status])                                    // Index status defaults
  @@index([category])                                  // Index category defaults
}

/// Order model with comprehensive default value strategy
model Order {
  // Unique identifiers
  id            String      @id @default(cuid())       // Unique order ID
  orderNumber   String      @unique @default(uuid())   // Public order number
  
  // Order status with workflow defaults
  status        OrderStatus @default(PENDING)          // Default pending status
  paymentStatus PaymentStatus @default(UNPAID)         // Default unpaid status
  
  // Customer relationship (required)
  customerId    String
  customer      User        @relation(fields: [customerId], references: [id])
  
  // Financial defaults
  subtotal      Decimal     @default(0.00) @db.Decimal(12, 2)  // Default zero subtotal
  taxAmount     Decimal     @default(0.00) @db.Decimal(10, 2)  // Default zero tax
  shippingCost  Decimal     @default(0.00) @db.Decimal(8, 2)   // Default zero shipping
  discountAmount Decimal    @default(0.00) @db.Decimal(8, 2)   // Default zero discount
  totalAmount   Decimal     @default(0.00) @db.Decimal(12, 2)  // Default zero total
  
  // Currency and localization defaults
  currency      String      @default("USD")            // Default USD currency
  locale        String      @default("en-US")          // Default US English
  
  // Shipping and fulfillment defaults
  shippingMethod String?                               // Optional shipping method
  isGift        Boolean     @default(false)           // Default not a gift
  requiresSignature Boolean @default(false)           // Default no signature
  
  // Communication preferences
  sendNotifications Boolean @default(true)            // Default send notifications
  sendSMS          Boolean  @default(false)           // Default no SMS
  
  // Priority and handling defaults
  priority      OrderPriority @default(NORMAL)        // Default normal priority
  isUrgent      Boolean       @default(false)         // Default not urgent
  isBackorder   Boolean       @default(false)         // Default not backorder
  
  // Notes and metadata
  customerNotes String?                               // Optional customer notes
  internalNotes String?                               // Optional internal notes
  metadata      Json         @default("{}")           // Default empty metadata
  
  // Audit and tracking
  createdAt     DateTime     @default(now())          // Auto-set creation
  updatedAt     DateTime     @updatedAt               // Auto-update modification
  
  @@map("orders")
  @@index([status])                                   // Index status defaults
  @@index([currency])                                 // Index currency defaults
}

/// Enumeration definitions for default values
enum UserRole {
  ADMIN
  MANAGER
  USER      // Default value
  GUEST
  
  @@map("user_roles")
}

enum ProductStatus {
  DRAFT     // Default value
  REVIEW
  PUBLISHED
  ARCHIVED
  DELETED
  
  @@map("product_statuses")
}

enum OrderStatus {
  PENDING   // Default value
  CONFIRMED
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
  REFUNDED
  
  @@map("order_statuses")
}

enum PaymentStatus {
  UNPAID    // Default value
  PAID
  PARTIAL
  REFUNDED
  FAILED
  
  @@map("payment_statuses")
}

enum OrderPriority {
  LOW
  NORMAL    // Default value
  HIGH
  URGENT
  
  @@map("order_priorities")
}
```

### 2. Complex Default Value Patterns

```prisma
// ==========================================
// ADVANCED DEFAULT VALUE CONFIGURATIONS
// ==========================================

/// User settings model with sophisticated default strategies
model UserSettings {
  // User relationship
  userId        String   @id
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Theme and appearance defaults
  theme         String   @default("light")           // Default light theme
  fontSize      String   @default("medium")          // Default medium font
  colorScheme   String   @default("blue")            // Default blue colors
  language      String   @default("en")              // Default English
  
  // Notification preferences with granular defaults
  emailNotifications     Boolean @default(true)     // Default email enabled
  pushNotifications      Boolean @default(true)     // Default push enabled
  smsNotifications       Boolean @default(false)    // Default SMS disabled
  marketingEmails        Boolean @default(false)    // Default marketing opt-out
  securityAlerts         Boolean @default(true)     // Default security alerts
  
  // Privacy settings with secure defaults
  profileVisibility      String  @default("public") // Default public profile
  showEmail              Boolean @default(false)    // Default hide email
  showPhone              Boolean @default(false)    // Default hide phone
  allowMessages          Boolean @default(true)     // Default allow messages
  showOnlineStatus       Boolean @default(true)     // Default show online
  indexBySearchEngines   Boolean @default(true)     // Default search indexing
  
  // Content and interaction defaults
  defaultPostVisibility  String  @default("public") // Default public posts
  autoSaveEnabled        Boolean @default(true)     // Default auto-save
  showReadReceipts       Boolean @default(true)     // Default read receipts
  allowTagging           Boolean @default(true)     // Default allow tagging
  
  // Security and access defaults
  sessionTimeout         Int     @default(30)       // Default 30 min timeout
  requirePasswordChange  Boolean @default(false)    // Default no forced change
  allowMultipleSessions  Boolean @default(true)     // Default multiple sessions
  loginAlertsEnabled     Boolean @default(true)     // Default login alerts
  
  // Regional and localization defaults
  timezone               String  @default("UTC")    // Default UTC timezone
  dateFormat             String  @default("MM/DD/YYYY") // Default US date format
  timeFormat             String  @default("12")     // Default 12-hour format
  currency               String  @default("USD")    // Default USD currency
  
  // Content preferences
  contentFiltering       String  @default("moderate") // Default moderate filtering
  adultContentEnabled    Boolean @default(false)    // Default no adult content
  autoplayVideos         Boolean @default(true)     // Default autoplay videos
  showSensitiveContent   Boolean @default(false)    // Default hide sensitive
  
  // Advanced JSON defaults for complex preferences
  customPreferences      Json    @default("{\"sidebar\": \"expanded\", \"tooltips\": true}")
  experimentalFeatures   Json    @default("[]")      // Default empty array
  keyboardShortcuts      Json    @default("{\"save\": \"Ctrl+S\", \"search\": \"Ctrl+F\"}")
  
  // Audit timestamps
  createdAt             DateTime @default(now())    // Auto-set creation
  updatedAt             DateTime @updatedAt         // Auto-update modification
  
  @@map("user_settings")
}

/// Configuration model with environment-based defaults
model Configuration {
  id            String   @id @default(cuid())
  
  // System configuration with operational defaults
  appName       String   @default("MyApp")          // Default application name
  version       String   @default("1.0.0")          // Default version
  environment   String   @default("development")    // Default environment
  
  // Performance and scaling defaults
  maxFileSize          Int     @default(10485760)   // Default 10MB file limit
  sessionTimeout       Int     @default(3600)       // Default 1 hour timeout
  rateLimitPerMinute   Int     @default(60)         // Default 60 requests/min
  cacheExpiration      Int     @default(300)        // Default 5 min cache
  
  // Feature flags with conservative defaults
  maintenanceMode      Boolean @default(false)     // Default not in maintenance
  registrationEnabled  Boolean @default(true)      // Default allow registration
  emailVerificationRequired Boolean @default(true) // Default require verification
  twoFactorRequired    Boolean @default(false)     // Default 2FA optional
  
  // Security defaults
  passwordMinLength    Int     @default(8)          // Default 8 char minimum
  passwordRequireSpecial Boolean @default(true)    // Default require special chars
  maxLoginAttempts     Int     @default(5)          // Default 5 attempt limit
  lockoutDuration      Int     @default(900)        // Default 15 min lockout
  
  // Communication defaults
  fromEmailAddress     String  @default("noreply@example.com") // Default sender
  supportEmailAddress  String  @default("support@example.com") // Default support
  
  // Regional and business defaults
  defaultCurrency      String  @default("USD")      // Default currency
  defaultTimezone      String  @default("UTC")      // Default timezone
  defaultLanguage      String  @default("en")       // Default language
  
  // Business rules defaults
  freeTrialDays        Int     @default(14)         // Default 14-day trial
  maxFreeUsers         Int     @default(5)          // Default 5 free users
  subscriptionRequired Boolean @default(false)     // Default free tier available
  
  // Content and upload defaults
  allowedFileTypes     String[] @default(["jpg", "png", "pdf"]) // Default file types
  maxStoragePerUser    BigInt   @default(1073741824) // Default 1GB storage
  
  // Complex JSON configuration defaults
  emailTemplates       Json     @default("{\"welcome\": \"template1\", \"reset\": \"template2\"}")
  integrationSettings  Json     @default("{\"stripe\": {\"enabled\": false}, \"mailgun\": {\"enabled\": false}}")
  featureFlags         Json     @default("{\"betaFeatures\": false, \"analytics\": true}")
  
  // Audit and versioning
  createdAt           DateTime @default(now())      // Auto-set creation
  updatedAt           DateTime @updatedAt           // Auto-update modification
  isActive            Boolean  @default(true)       // Default active config
  
  @@map("configurations")
  @@index([environment])                            // Index environment defaults
  @@index([isActive])                               // Index active configs
}
```

---

## ðŸ¤– Auto-generation Patterns

### 1. Identifier Auto-generation Strategies

```prisma
// ==========================================
// AUTO-GENERATION PATTERNS & STRATEGIES
// ==========================================

/// Comprehensive identifier generation examples
/// Demonstrates various auto-generation patterns for different use cases
model User {
  // CUID (Collision-resistant Unique ID) - Recommended for most cases
  id          String   @id @default(cuid())          // Primary identifier
  
  // UUID (Universally Unique ID) - Good for distributed systems
  uuid        String   @unique @default(uuid())      // External reference ID
  
  // Sequential auto-increment - Good for human-readable IDs
  sequence    Int      @unique @default(autoincrement()) // Sequential number
  
  // Custom formatted identifiers (application logic required)
  customId    String   @unique                        // e.g., "USER-001", "ACC-2023-001"
  
  // Other required fields
  email       String   @unique
  createdAt   DateTime @default(now())
  
  @@map("users")
}

/// Order model with multiple auto-generated identifiers
model Order {
  // Internal system ID - CUID for primary key
  id              String   @id @default(cuid())
  
  // Customer-facing order number - UUID for external references
  orderNumber     String   @unique @default(uuid())
  
  // Internal sequential tracking - auto-increment for reports
  sequenceNumber  Int      @unique @default(autoincrement())
  
  // Formatted business identifier (requires application logic)
  // Format: ORD-YYYY-MM-NNNNNN (e.g., ORD-2023-12-000001)
  businessId      String?  @unique                   // Generated by application
  
  // Customer reference
  customerId      String
  customer        User     @relation(fields: [customerId], references: [id])
  
  // Auto-generated timestamps
  createdAt       DateTime @default(now())           // Creation timestamp
  updatedAt       DateTime @updatedAt                // Last modification
  
  // Auto-generated status tracking
  status          OrderStatus @default(PENDING)     // Default status
  
  @@map("orders")
  @@index([orderNumber])                             // Index auto-generated fields
  @@index([sequenceNumber])                          // Index sequential IDs
}

/// Product model with SKU auto-generation pattern
model Product {
  // System identifier
  id              String   @id @default(cuid())
  
  // Business SKU (Stock Keeping Unit) - often auto-generated
  sku             String   @unique                   // e.g., "PROD-2023-001"
  
  // Universal Product Code - may be auto-generated or assigned
  upc             String?  @unique                   // UPC barcode
  
  // Internal tracking number
  internalId      Int      @unique @default(autoincrement())
  
  // Product information
  name            String
  
  // Vendor relationship
  vendorId        String
  vendor          User     @relation("VendorProducts", fields: [vendorId], references: [id])
  
  // Auto-generated slugs for SEO (application logic)
  slug            String?  @unique                   // URL-friendly version of name
  
  // Auto-generated timestamps
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  @@map("products")
  @@index([sku])                                     // Index business identifiers
}

/// Invoice model with sophisticated auto-generation
model Invoice {
  // System ID
  id              String   @id @default(cuid())
  
  // Business invoice number with sequential pattern
  invoiceNumber   String   @unique @default(uuid())  // Temporary UUID, replaced by app
  
  // Fiscal year sequence (application logic required)
  fiscalSequence  Int?                               // e.g., 2023-001, 2023-002
  
  // Customer reference
  customerId      String
  customer        User     @relation(fields: [customerId], references: [id])
  
  // Auto-generated financial data
  subtotal        Decimal  @default(0.00) @db.Decimal(12, 2)
  taxAmount       Decimal  @default(0.00) @db.Decimal(10, 2)
  totalAmount     Decimal  @default(0.00) @db.Decimal(12, 2)
  
  // Auto-generated dates
  issueDate       DateTime @default(now())           // When invoice created
  dueDate         DateTime                           // Calculated by application
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Auto-generated status
  status          InvoiceStatus @default(DRAFT)
  
  @@map("invoices")
  @@index([invoiceNumber])
  @@index([fiscalSequence])
}

/// Session model with auto-expiration patterns
model UserSession {
  // Session identifier
  id              String   @id @default(cuid())
  
  // Session token - auto-generated secure token
  token           String   @unique @default(uuid())  // Session token
  
  // User reference
  userId          String
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Auto-generated session lifecycle
  createdAt       DateTime @default(now())           // Session start
  lastActiveAt    DateTime @default(now())           // Last activity
  expiresAt       DateTime                           // Calculated expiration
  
  // Auto-generated session metadata
  ipAddress       String?                            // Captured automatically
  userAgent       String?                            // Captured automatically
  
  // Session state
  isActive        Boolean  @default(true)            // Auto-managed state
  
  @@map("user_sessions")
  @@index([token])                                   // Index auto-generated tokens
  @@index([expiresAt])                               // Index for cleanup
}

/// Audit log with comprehensive auto-generation
model AuditLog {
  // Log entry ID
  id              String   @id @default(cuid())
  
  // Auto-generated sequence for ordering
  sequence        BigInt   @unique @default(autoincrement())
  
  // Entity tracking
  entityType      String                             // e.g., "User", "Product"
  entityId        String                             // Entity being tracked
  
  // Action tracking
  action          String                             // e.g., "CREATE", "UPDATE", "DELETE"
  changes         Json?                              // Auto-captured changes
  
  // Auto-generated context
  timestamp       DateTime @default(now())           // When action occurred
  userId          String?                            // Who performed action
  ipAddress       String?                            // Where action originated
  userAgent       String?                            // Client information
  
  // Auto-generated metadata
  sessionId       String?                            // Session context
  requestId       String?                            // Request tracking
  
  @@map("audit_logs")
  @@index([entityType, entityId])                   // Index for entity queries
  @@index([timestamp])                               // Index temporal queries
  @@index([sequence])                                // Index sequential access
}

/// File upload with auto-generated metadata
model FileUpload {
  // File identifier
  id              String   @id @default(cuid())
  
  // Auto-generated file information
  originalName    String                             // Original filename
  fileName        String   @unique @default(uuid())  // Generated unique filename
  
  // Auto-detected file properties
  fileSize        BigInt                             // File size in bytes
  mimeType        String                             // Detected MIME type
  fileHash        String?                            // SHA-256 hash for deduplication
  
  // Auto-generated storage information
  storagePath     String                             // Generated storage path
  storageProvider String   @default("local")         // Storage provider
  
  // Upload context
  uploadedById    String
  uploadedBy      User     @relation(fields: [uploadedById], references: [id])
  
  // Auto-generated metadata
  uploadedAt      DateTime @default(now())           // Upload timestamp
  lastAccessedAt  DateTime @default(now())           // Access tracking
  
  // Auto-generated status
  status          FileStatus @default(PROCESSING)    // Processing status
  isPublic        Boolean    @default(false)         // Default private
  
  @@map("file_uploads")
  @@index([fileName])                                // Index generated filenames
  @@index([fileHash])                                // Index for deduplication
}

/// Enums for auto-generated status fields
enum OrderStatus {
  PENDING
  CONFIRMED
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
  
  @@map("order_statuses")
}

enum InvoiceStatus {
  DRAFT
  SENT
  PAID
  OVERDUE
  CANCELLED
  
  @@map("invoice_statuses")
}

enum FileStatus {
  PROCESSING
  READY
  ERROR
  DELETED
  
  @@map("file_statuses")
}
```

### 2. Dynamic and Computed Defaults

```typescript
// ==========================================
// DYNAMIC DEFAULT VALUE PATTERNS
// ==========================================

/// Dynamic default strategies requiring application logic
interface DynamicDefaultPatterns {
  
  // Time-based dynamic defaults
  temporalDefaults: {
    futureExpiration: {
      description: "Calculate future dates based on current time";
      examples: {
        trialEnd: "now() + 14 days",
        subscriptionRenewal: "now() + 1 month",
        sessionExpiry: "now() + 30 minutes",
        passwordExpiry: "now() + 90 days"
      };
      implementation: "Application logic with DateTime calculations";
    };
    
    businessCalendar: {
      description: "Defaults based on business calendar logic";
      examples: {
        nextBusinessDay: "Next weekday after now()",
        endOfQuarter: "Last day of current fiscal quarter",
        payrollDate: "Next scheduled payroll date",
        maintenanceWindow: "Next scheduled maintenance"
      };
      implementation: "Business logic with calendar calculations";
    };
  };
  
  // User context-based defaults
  contextualDefaults: {
    userProfile: {
      description: "Defaults based on user information and history";
      examples: {
        timezone: "Detect from user's IP geolocation",
        language: "Browser language or user preference",
        currency: "Based on user's country",
        theme: "Based on user's previous preference"
      };
      implementation: "User context analysis and preference learning";
    };
    
    organizationInheritance: {
      description: "Inherit defaults from parent organization";
      examples: {
        permissions: "Copy from organization default role",
        settings: "Inherit organization-wide preferences",
        billing: "Use organization billing information",
        compliance: "Apply organization compliance rules"
      };
      implementation: "Hierarchical default inheritance patterns";
    };
  };
  
  // Business rule-based defaults
  businessLogicDefaults: {
    pricing: {
      description: "Dynamic pricing based on business rules";
      examples: {
        subscriptionPrice: "Based on user tier and features",
        shippingCost: "Calculated from distance and weight",
        taxAmount: "Based on customer location and product type",
        discountAmount: "Applied based on user eligibility"
      };
      implementation: "Complex business rule evaluation";
    };
    
    workflow: {
      description: "Workflow state defaults based on conditions";
      examples: {
        approvalRequired: "Based on amount threshold and user role",
        notificationLevel: "Based on urgency and recipient role",
        escalationPath: "Based on issue type and organization structure",
        reviewProcess: "Based on content type and compliance requirements"
      };
      implementation: "Conditional workflow logic";
    };
  };
  
  // External system integration defaults
  integrationDefaults: {
    apis: {
      description: "Defaults fetched from external APIs";
      examples: {
        exchangeRate: "Current rate from financial API",
        weatherData: "Current weather for user location",
        stockPrice: "Current price from market API",
        creditScore: "Fetched from credit bureau API"
      };
      implementation: "Real-time API integration";
    };
    
    computation: {
      description: "Computed defaults based on existing data";
      examples: {
        averageRating: "Calculated from all product reviews",
        totalSpent: "Sum of all user purchases",
        completionRate: "Percentage of completed tasks",
        popularityScore: "Based on views, likes, and shares"
      };
      implementation: "Data aggregation and calculation";
    };
  };
}

/// Example application logic for dynamic defaults
class DynamicDefaultsImplementation {
  
  // Calculate subscription expiration based on plan
  calculateSubscriptionExpiry(planType: string): Date {
    const now = new Date();
    switch (planType) {
      case 'trial':
        return new Date(now.getTime() + 14 * 24 * 60 * 60 * 1000); // 14 days
      case 'monthly':
        return new Date(now.getFullYear(), now.getMonth() + 1, now.getDate());
      case 'yearly':
        return new Date(now.getFullYear() + 1, now.getMonth(), now.getDate());
      default:
        return new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000); // 30 days default
    }
  }
  
  // Generate formatted business ID
  generateBusinessId(entityType: string, sequence: number): string {
    const year = new Date().getFullYear();
    const month = String(new Date().getMonth() + 1).padStart(2, '0');
    const seq = String(sequence).padStart(6, '0');
    return `${entityType}-${year}-${month}-${seq}`;
  }
  
  // Calculate due date based on payment terms
  calculateDueDate(invoiceDate: Date, paymentTerms: string): Date {
    const dueDate = new Date(invoiceDate);
    switch (paymentTerms) {
      case 'net-15':
        dueDate.setDate(dueDate.getDate() + 15);
        break;
      case 'net-30':
        dueDate.setDate(dueDate.getDate() + 30);
        break;
      case 'net-60':
        dueDate.setDate(dueDate.getDate() + 60);
        break;
      default:
        dueDate.setDate(dueDate.getDate() + 30); // Default 30 days
    }
    return dueDate;
  }
  
  // Generate SEO-friendly slug from title
  generateSlug(title: string): string {
    return title
      .toLowerCase()
      .replace(/[^a-z0-9]+/g, '-')
      .replace(/^-+|-+$/g, '')
      .substring(0, 255);
  }
  
  // Calculate shipping cost based on weight and distance
  calculateShippingCost(weight: number, distance: number, method: string): number {
    const baseRates = {
      'standard': 5.99,
      'expedited': 12.99,
      'overnight': 24.99
    };
    
    const baseRate = baseRates[method] || baseRates['standard'];
    const weightMultiplier = Math.max(1, Math.ceil(weight / 1000)); // Per kg
    const distanceMultiplier = distance > 500 ? 1.5 : 1.0;
    
    return baseRate * weightMultiplier * distanceMultiplier;
  }
  
  // Generate secure random password
  generateSecurePassword(length: number = 12): string {
    const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';
    let password = '';
    for (let i = 0; i < length; i++) {
      password += charset.charAt(Math.floor(Math.random() * charset.length));
    }
    return password;
  }
  
  // Calculate user permissions based on role and organization
  calculateUserPermissions(role: string, organizationTier: string): string[] {
    const basePermissions = ['read'];
    const rolePermissions = {
      'admin': ['read', 'write', 'delete', 'manage_users', 'manage_billing'],
      'manager': ['read', 'write', 'manage_team'],
      'user': ['read', 'write'],
      'guest': ['read']
    };
    
    let permissions = [...basePermissions, ...(rolePermissions[role] || [])];
    
    // Add premium permissions for higher tier organizations
    if (organizationTier === 'enterprise') {
      permissions.push('advanced_analytics', 'api_access', 'custom_integrations');
    }
    
    return [...new Set(permissions)]; // Remove duplicates
  }
}
```

---

## ðŸ§  Knowledge Check

### Default Values & Auto-generation Mastery Quiz

1. **What is the difference between `@default(cuid())` and `@default(uuid())`?**
   - [x] A) CUID is collision-resistant and shorter, UUID is universally unique and standard
   - [ ] B) They are exactly the same
   - [ ] C) CUID is for strings, UUID is for integers
   - [ ] D) UUID is more secure than CUID

   **Explanation**: CUID (Collision-resistant Unique ID) is designed to be shorter and more collision-resistant, while UUID is a standardized format that's universally unique and widely supported across systems.

2. **Which field modifier automatically updates a timestamp when a record is modified?**
   - [ ] A) @default(now())
   - [x] B) @updatedAt
   - [ ] C) @timestamp
   - [ ] D) @autoUpdate

   **Explanation**: The `@updatedAt` modifier automatically updates the field to the current timestamp whenever the record is modified, providing automatic change tracking.

3. **What is the best practice for setting boolean field defaults?**
   - [ ] A) Always default to true
   - [ ] B) Never use defaults for booleans
   - [x] C) Use defaults that represent the most secure or conservative option
   - [ ] D) Always default to false

   **Explanation**: Boolean defaults should represent the most secure, conservative, or commonly expected behavior. For example, `isActive: true` for user accounts, but `allowMarketing: false` for privacy protection.

### Practical Exercise: Smart Configuration System

**Challenge**: Design a comprehensive configuration system with intelligent defaults

**Scenario**: Create a multi-tenant SaaS application configuration system

**Requirements**:
1. User accounts with progressive default settings
2. Organization-level configurations with inheritance
3. Auto-generated identifiers and tracking
4. Dynamic defaults based on user context
5. Audit logging with auto-generation

**Solution Template**:
```prisma
model Organization {
  id            String   @id @default(cuid())
  // Add organization fields with intelligent defaults
}

model User {
  id            String   @id @default(cuid())
  // Add user fields with progressive defaults
}

model UserSettings {
  // Add comprehensive user settings with smart defaults
}

model AuditLog {
  // Add audit logging with auto-generation
}
```

**Validation Checklist**:
- [ ] Appropriate default values for all boolean fields
- [ ] Auto-generated identifiers for tracking
- [ ] Progressive disclosure default patterns
- [ ] Secure and conservative default selections
- [ ] Audit trail with automatic timestamps
- [ ] Business logic-appropriate defaults

---

## ðŸ’¡ Key Takeaways

- ðŸ­ **Factory Automation**: Default values create intelligent, self-managing data models
- âš¡ **User Experience**: Smart defaults reduce data entry friction and improve usability
- ðŸŽ¯ **Business Logic**: Strategic defaults enforce business rules and operational requirements
- ðŸ”„ **Auto-generation**: Automated ID and timestamp generation ensures consistency
- ðŸ›¡ï¸ **Security Focus**: Conservative defaults protect user privacy and system security
- ðŸŽ¨ **Progressive Enhancement**: Defaults enable feature functionality without blocking usage
- ðŸ“ˆ **Operational Efficiency**: Auto-generation reduces manual processes and errors
- ðŸ§  **Intelligent Systems**: Dynamic defaults adapt to context and user behavior

---

## ðŸ”— Navigation

**ðŸ“ Current Location**: Module 3 â†’ Section 3.2 â†’ Lesson 3.2.4

**â¬…ï¸ Previous**: [3.2.3 Optional vs Required Fields](./3.2.3-optional-vs-required-fields.md)
**âž¡ï¸ Next**: [3.2.5 Model Attributes](./3.2.5-model-attributes.md)

**ðŸ  Section Home**: [3.2 Data Model & Models](./README.md)
**ðŸ“š Module Home**: [Module 3: Prisma Schema](../README.md)

**ðŸ—ºï¸ Quick Links**:
- [Default Values Reference](https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#default)
- [Auto-increment Documentation](https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#autoincrement)
- [UUID Generation Guide](https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#uuid)
- [CUID Documentation](https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#cuid)

---

*ðŸŽ¯ Excellent! You've mastered default values and auto-generation strategies. Next, we'll explore model attributes for advanced schema optimization and constraints!*
